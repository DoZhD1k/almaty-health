# 🎯 Как работают рекомендации? (Краткая версия)

## Простыми словами

Когда больница перегружена (>70%), система автоматически ищет ближайшие менее загруженные больницы и рекомендует их для перенаправления пациентов.

## 📍 Пошаговый процесс

### Шаг 1: Находим перегруженные больницы

```
Больница перегружена если: загруженность > 70%
```

Например: **АО "Научный центр" — 112% загруженность** ❌

### Шаг 2: Ищем подходящие альтернативы

Альтернативная больница должна быть:

✅ **Не перегружена** (загруженность < 70%)  
✅ **В радиусе 15 км** от перегруженной  
✅ **С доступными койками** (хотя бы 1 свободная)  
✅ **С известным адресом** (есть координаты)

### Шаг 3: Сортируем по приоритету

**Приоритет #1 (70%): Близость** 🚗  
Чем ближе — тем лучше

**Приоритет #2 (30%): Вместимость** 🏥  
Чем больше свободных коек — тем лучше

### Шаг 4: Показываем топ-5

Система показывает **5 лучших вариантов** в порядке приоритета.

## 🔢 Пример расчёта

**Дано:** Больница А перегружена (95%)

**Нашлись 3 альтернативы:**

| Больница | Расстояние | Свободных коек | Загруженность | Приоритет   |
| -------- | ---------- | -------------- | ------------- | ----------- |
| Б        | 3 км       | 10 коек        | 56%           | 1️⃣ (лучший) |
| В        | 8 км       | 50 коек        | 34%           | 2️⃣          |
| Г        | 12 км      | 5 коек         | 62%           | 3️⃣          |

**Почему Б на первом месте?**

- Близко (всего 3 км = ~5 минут)
- Есть койки (10 свободных)
- Не перегружена (56%)

## ⏱️ Время в пути

Рассчитывается автоматически:

```
Время = (расстояние ÷ 40 км/ч) × 60 минут
```

**Примеры:**

- 3 км → ~5 минут
- 8 км → ~12 минут
- 15 км → ~23 минуты

## 💡 Что показывается в рекомендациях

Для каждой альтернативы вы видите:

📍 **Расстояние** — сколько км "по прямой"  
⏱️ **Время в пути** — примерное время доставки  
🛏️ **Свободные койки** — сколько доступно мест  
📊 **Загруженность** — текущая занятость  
🗺️ **Карта** — визуальный маршрут (кнопка "На карте")

## 🎨 Цветовая индикация

### Перегруженные больницы:

- 🔴 **Критический** (>90%) — срочно нужны меры
- 🟠 **Высокий** (80-90%) — требуется внимание
- 🟡 **Средний** (70-80%) — желательно снизить

### Альтернативы:

- 🟢 **Низкая** (<50%) — много свободных коек
- 🔵 **Нормальная** (50-70%) — есть места
- ⚪ **Загружена** (>70%) — не показывается

## ❓ Частые вопросы

### Почему некоторым больницам не находятся альтернативы?

**Возможные причины:**

1. Все соседние больницы тоже перегружены
2. Ближайшие больницы дальше 15 км
3. Нет свободных коек в радиусе

### Как расстояние рассчитывается?

По **формуле Гаверсинусов** — точный математический метод с учётом кривизны Земли.  
📐 [Подробнее о формуле](кнопка "Подробнее" на странице)

### Почему расстояние "по прямой"?

Это быстрый способ оценки. Для точного маршрута используйте навигационные приложения (2ГИС, Яндекс.Карты).

### Можно ли изменить радиус поиска?

Да, по умолчанию 15 км. Разработчики могут изменить в настройках системы.

### Учитывается ли специализация больниц?

Пока нет. Все больницы рассматриваются равнозначно. Нужно вручную проверять профиль.

## 🚀 Как использовать рекомендации

### Шаг 1: Открыть страницу

Перейдите в раздел **"Рекомендации"** в меню

### Шаг 2: Найти перегруженную больницу

Смотрите список с красными/оранжевыми индикаторами

### Шаг 3: Изучить альтернативы

Под каждой перегруженной больницей — список рекомендаций

### Шаг 4: Посмотреть на карте

Нажмите **"На карте"** чтобы увидеть маршрут

### Шаг 5: Принять решение

Учитывайте:

- Расстояние и время
- Количество свободных коек
- Специализацию (вручную)
- Реальные дороги (навигатор)

### Шаг 6: Координация

Свяжитесь с принимающей больницей для подтверждения

## 📱 Интерфейс

```
┌─────────────────────────────────────────────┐
│ ℹ️ Как работает система?                    │
│ Формула Гаверсинусов...    [Подробнее]     │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ ⚠️ Обнаружено 3 перегруженных МО           │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 🔴 Критический 112%                         │
│ АО "Научный центр акушерства..."           │
│ 📍 Медеуский район • 🛏️ 123 коек          │
│                                             │
│ 🚗 Рекомендуется перенаправить 33 пациентов│
│                                             │
│ РЕКОМЕНДОВАННЫЕ АЛЬТЕРНАТИВЫ                │
│                                             │
│ 1️⃣ ТОО "Институт хирургии"                 │
│    📍 1.2 км  ⏱️ ~2 мин  🛏️ 50 своб. коек │
│    56% загруженность      [На карте] ─────┐│
│                                            ││
│ 2️⃣ ГУ "Региональный военный госпиталь"    ││
│    📍 0.8 км  ⏱️ ~1 мин  🛏️ 27 своб. коек ││
│    34% загруженность      [На карте]      ││
└────────────────────────────────────────────┘
                                              │
                                              ▼
┌──────────────────────────────────────────────────┐
│ 🗺️ Маршрут перенаправления             [✕]     │
│                                                  │
│ ┌──────────────┐   📍 1.6 км   ┌──────────────┐ │
│ │  🔴 Откуда   │   ~ 2 минут   │  🟢 Куда     │ │
│ │ АО "Научный  │   ──────────→ │ ТОО "Институт│ │
│ │    центр"    │               │  хирургии"   │ │
│ │   112%       │               │    56%       │ │
│ └──────────────┘               └──────────────┘ │
│                                                  │
│ ┌────────────────────────────────────────────┐  │
│ │           [Карта с маркерами]              │  │
│ │                                            │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

## 🎓 Полезные ссылки

- 📐 **[Формула расчёта расстояний](DISTANCE_CALCULATION.md)** — подробно о формуле Гаверсинусов
- 🔬 **[Алгоритм рекомендаций](RECOMMENDATIONS_ALGORITHM.md)** — техническая документация
- 📊 **[Система рекомендаций](RECOMMENDATIONS_SYSTEM.md)** — общее описание

---

**💡 Совет:** Используйте рекомендации как отправную точку, но всегда учитывайте специфику ситуации и реальные условия!
